import{u as _,r as f,j as e}from"./index-BdVnEZy5.js";import{u as a}from"./useQuery-BQEVlMt-.js";import"./useBaseQuery-Bqz_ihlr.js";const u=[{id:1,name:"Laptop Pro",description:"High-performance laptop",price:1200},{id:2,name:"Wireless Mouse",description:"Ergonomic wireless mouse",price:25},{id:3,name:"Mechanical Keyboard",description:"RGB mechanical keyboard",price:75},{id:4,name:"4K Monitor",description:"32-inch 4K UHD Monitor",price:300}],j=async()=>(console.log("Fetching product list..."),await new Promise(t=>setTimeout(t,500)),console.log("Fetched product list."),u),h=async t=>{console.log(`Fetching details for product ${t}...`),await new Promise(o=>setTimeout(o,1e3));const i=u.find(o=>o.id===t);if(!i)throw new Error(`Product with id ${t} not found`);return console.log(`Fetched details for product ${t}:`,i),i},y=()=>a({queryKey:["products"],queryFn:j}),P=t=>a({queryKey:["product",t],queryFn:()=>h(t),enabled:!!t,staleTime:60*1e3}),C=()=>{const t=_();return o=>{console.log(`Prefetching product ${o}...`),t.prefetchQuery({queryKey:["product",o],queryFn:()=>h(o),staleTime:60*1e3})}},T="_container_1x3gi_1",L="_layout_1x3gi_43",N="_listColumn_1x3gi_53",D="_detailsColumn_1x3gi_55",E="_productList_1x3gi_89",F="_productListItem_1x3gi_101",w="_selected_1x3gi_113",v="_productButton_1x3gi_129",$="_detailsCard_1x3gi_169",q="_loadingText_1x3gi_213",k="_loadingIndicator_1x3gi_223",B="_errorText_1x3gi_247",s={container:T,layout:L,listColumn:N,detailsColumn:D,productList:E,productListItem:F,selected:w,productButton:v,detailsCard:$,loadingText:q,loadingIndicator:k,errorText:B},M=()=>{const[t,i]=f.useState(null),{data:o,isLoading:p,error:l}=y(),{data:c,isFetching:n,error:d}=P(t),m=C(),x=r=>{console.log(`Selected product ${r}`),i(r)},g=r=>{m(r)};return e.jsxs("div",{className:s.container,children:[e.jsx("h1",{children:"Prefetching Example"}),e.jsx("p",{children:"Hover over a product name in the list to prefetch its details. Then, click the product name. If prefetching worked, the details should appear almost instantly despite the simulated 1-second fetch delay. To see the difference, select the product using the tab key and enter. A loading UI should appear."}),e.jsxs("div",{className:s.layout,children:[e.jsxs("div",{className:s.listColumn,children:[e.jsx("h2",{children:"Products"}),p&&e.jsx("p",{className:s.loadingText,children:"Loading products..."}),l&&e.jsxs("p",{className:s.errorText,children:["Error loading products: ",l.message]}),o&&e.jsx("ul",{className:s.productList,children:o.map(r=>e.jsx("li",{onMouseEnter:()=>g(r.id),className:`${s.productListItem} ${t===r.id?s.selected:""}`,children:e.jsx("button",{onClick:()=>x(r.id),className:s.productButton,children:r.name})},r.id))})]}),e.jsxs("div",{className:s.detailsColumn,children:[e.jsx("h2",{children:"Product Details"}),t===null&&e.jsx("p",{children:"Select a product from the list to view details."}),n&&e.jsx("div",{className:s.loadingIndicator,children:"Fetching Details..."}),d&&!n&&e.jsxs("p",{className:s.errorText,children:["Error loading details: ",d.message]}),c&&!n&&e.jsxs("div",{className:s.detailsCard,children:[e.jsx("h3",{children:c.name}),e.jsxs("p",{children:[e.jsx("strong",{children:"ID:"})," ",c.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",c.description]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Price:"})," $",c.price.toFixed(2)]})]})]})]})]})};export{M as PrefetchingExample};
