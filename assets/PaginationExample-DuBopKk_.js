import{r as x,j as e}from"./index-BdVnEZy5.js";import{u as g}from"./useQuery-BQEVlMt-.js";import{D as p}from"./DescriptionBox-DrhUbtg5.js";import"./useBaseQuery-Bqz_ihlr.js";const d=50,h=10,u=async(n=1)=>{console.log(`Fetching page: ${n}`),await new Promise(r=>setTimeout(r,750));const i=(n-1)*h,a=i+h,c=Array.from({length:d},(r,l)=>`Item ${l+1}`).slice(i,a),o=a<d;return{items:c,hasMore:o,totalItems:d}},j="_container_1rozx_1",_="_descriptionColumn_1rozx_25",T="_exampleColumn_1rozx_35",f="_heading_1rozx_51",P="_itemList_1rozx_65",b="_item_1rozx_65",y="_paginationControls_1rozx_95",N="_button_1rozx_111",v="_pageInfo_1rozx_153",C="_loadingText_1rozx_163",w="_errorText_1rozx_179",s={container:j,descriptionColumn:_,exampleColumn:T,heading:f,itemList:P,item:b,paginationControls:y,button:N,pageInfo:v,loadingText:C,errorText:w},L=()=>{const[n,i]=x.useState(1),{data:a,error:c,isFetching:o,isPlaceholderData:r,isLoading:l}=g({queryKey:["paginatedData",n],queryFn:()=>u(n),placeholderData:t=>t,staleTime:5*60*1e3}),m=a?Math.ceil(a.totalItems/10):0;return e.jsxs("div",{className:s.container,children:[e.jsx("div",{className:s.descriptionColumn,children:e.jsxs(p,{title:"Pagination with useQuery and placeholderData",children:[e.jsxs("p",{children:["This example shows how to implement pagination using"," ",e.jsx("code",{children:"useQuery"}),"."]}),e.jsxs("ul",{children:[e.jsxs("li",{children:["The current ",e.jsx("code",{children:"page"})," number is included in the ",e.jsx("code",{children:"queryKey"})," (",e.jsx("code",{children:"['paginatedData', page]"}),"). This makes Tanstack Query cache the data for each page separately."]}),e.jsxs("li",{children:[e.jsx("code",{children:"placeholderData"})," is used (previously"," ",e.jsx("code",{children:"keepPreviousData"}),"). When fetching a new page, Tanstack Query keeps displaying the data from the ",e.jsx("em",{children:"previous"})," page until the new data arrives. This prevents the UI from jumping to a loading state and provides a smoother experience."]}),e.jsxs("li",{children:[e.jsx("code",{children:"isPlaceholderData"}),' becomes true when placeholder data is being shown while new data is loading in the background. We use this to disable the "Next Page" button during that time.']}),e.jsxs("li",{children:[e.jsx("code",{children:"isFetching"}),' indicates when a fetch is happening (either initial or background refetch), used here to show "(Updating...)".']})]})]})}),e.jsxs("div",{className:s.exampleColumn,children:[e.jsx("h1",{className:s.heading,children:"Pagination Example"}),l&&e.jsx("div",{className:s.loadingText,children:"Loading data..."}),c instanceof Error&&e.jsxs("div",{className:s.errorText,children:["Error: ",c.message]}),a?e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:s.itemList,children:a.items.map(t=>e.jsx("li",{className:s.item,children:t},t))}),e.jsxs("div",{className:s.paginationControls,children:[e.jsx("button",{onClick:()=>i(t=>Math.max(t-1,1)),disabled:n===1,className:s.button,children:"Previous Page"}),e.jsxs("span",{className:s.pageInfo,children:["Page ",n," of ",m," ",o?"(Updating...)":""]}),e.jsx("button",{onClick:()=>i(t=>a!=null&&a.hasMore?t+1:t),disabled:r||!(a!=null&&a.hasMore),className:s.button,children:"Next Page"})]}),o&&!r&&e.jsx("div",{className:s.loadingText,children:"Fetching next page..."})]}):!o&&e.jsx("div",{className:s.loadingText,children:"Loading initial data..."})]})]})};export{L as PaginationExample};
